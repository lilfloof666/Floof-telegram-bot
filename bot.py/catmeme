import time
from datetime import datetime, timedelta
import telebot
import random

BOT_TOKEN = "8327139268:AAHldpid7j19JuxonZ6G5mimJEuLP1ZKzc8"
CHAT_ID = "@lilfloofcreations"

bot = telebot.TeleBot(BOT_TOKEN, parse_mode="HTML")

# ğŸ± Meme-Quellen (legal + random + jeden Tag neue)
CAT_SOURCES = [
        "https://cataas.com/cat",
            "https://cataas.com/cat/cute",
                "https://cataas.com/cat/gif",
                    "https://cataas.com/cat?type=square",
                        "https://cataas.com/cat/says/FLOOF",
                            "https://cataas.com/cat/says/MEOW",
                                "https://cataas.com/cat/says/CHAOS",
]

CAPTIONS = [
        "ğŸ¾ Daily Cat Meme ğŸ–¤",
            "ğŸ˜¼ Chaos floof incoming...",
                "ğŸ± Your daily emotional support cat.",
                    "ğŸ˜¹ Stay dark, stay fluffy.",
]

def random_cat_meme():
    """Sendet ein zufÃ¤lliges Cat Meme."""
        image_url = random.choice(CAT_SOURCES)
            caption = random.choice(CAPTIONS)
                bot.send_photo(CHAT_ID, image_url, caption=caption)


                # ğŸ“Œ COMMAND HANDLER â€“ Sofort ein Meme senden
                @bot.message_handler(commands=["cat", "meme"])
                def send_cat_on_command(message):
                    random_cat_meme()
                        bot.reply_to(message, "ğŸ˜º Here's your meme, Floofi!")


                        def seconds_until(hour, minute):
                            now = datetime.now()
                                target = now.replace(hour=hour, minute=minute, second=0, microsecond=0)
                                    if target <= now:
                                            target += timedelta(days=1)
                                                return int((target - now).total_seconds())


                                                def daily_cat_meme_loop():
                                                    """TÃ¤glicher 19-Uhr-Loop"""
                                                        while True:
                                                                wait = seconds_until(19, 0)
                                                                        print(f"â³ Warte {wait} Sekunden bis 19:00...")
                                                                                time.sleep(wait)

                                                                                        try:
                                                                                                    random_cat_meme()
                                                                                                                print("[OK] Daily Cat Meme gesendet!")
                                                                                                                        except Exception as e:
                                                                                                                                    print(f"[ERROR] {e}")

                                                                                                                                            time.sleep(5)  # bisschen warten damit er nicht doppelt sendet


                                                                                                                                            def main():
                                                                                                                                                # Bot in einem eigenen Thread starten
                                                                                                                                                    import threading
                                                                                                                                                        threading.Thread(target=daily_cat_meme_loop, daemon=True).start()

                                                                                                                                                            print("ğŸ± Cat Meme Bot lÃ¤uft! /cat = sofort Meme, Daily um 19 Uhr.")
                                                                                                                                                                bot.infinity_polling()


                                                                                                                                                                if __name__ == "__main__":
                                                                                                                                                                    main()
]
]